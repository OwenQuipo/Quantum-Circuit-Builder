@import"https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap";:root{--bg: #050505;--surface: #0d0d0d;--surface2: #101010;--text: #f4f4f4;--muted: #b8b8b8;--line: #ffffff22;--line-strong: #ffffff44;--shadow: rgba(0, 0, 0, .65);--accent: #fdfdfd;--accent-strong: #ffffff;--glow: #ffffff33;--pixel-grid: rgba(255,255,255,.04);--pixel-grid-strong: rgba(255,255,255,.08);--circuit-wire: #f4f4f4;--circuit-wire-faint: #777;--circuit-gate-bg: #0f0f0f;--circuit-gate-border: #fdfdfd;--circuit-gate-glow: #ffffff44;--bloch-label: #fdfdfd;--pop-cyan: #67d5ff;--pop-pink: #ff6fa3;--pop-lime: #9dff7a;--pad: 14px;--gap: 12px;--splitLeft: 44%;--splitW: 10px;--drawerH: 32vh;--drawerMinH: 180px;--drawerMaxH: 95vh;--gateLibW: 360px;--blochTileMin: 120px}:root[data-theme=light]{--bg: #f8f8f6;--surface: #ffffff;--surface2: #ececec;--text: #090909;--muted: #2f2f2f;--line: #00000022;--line-strong: #00000040;--shadow: rgba(0, 0, 0, .14);--accent: #0b0b0b;--accent-strong: #000000;--glow: #00000030;--pixel-grid: rgba(0,0,0,.06);--pixel-grid-strong: rgba(0,0,0,.12);--circuit-wire: #0b0b0b;--circuit-wire-faint: #555;--circuit-gate-bg: #fdfdfd;--circuit-gate-border: #0b0b0b;--circuit-gate-glow: #00000033;--bloch-label: #0b0b0b;--pop-cyan: #0086c9;--pop-pink: #c91873;--pop-lime: #3b8d1f}html,body{height:100%;margin:0;background:var(--bg);color:var(--text);overflow:hidden;font-family:"Press Start 2P",Courier New,monospace;letter-spacing:.03em;font-size:11px;text-transform:uppercase}#qubit-visualizer{height:100vh;display:grid;grid-template-rows:58px 1fr;gap:var(--gap);padding:var(--pad);box-sizing:border-box;background-image:linear-gradient(90deg,var(--pixel-grid) 1px,transparent 1px),linear-gradient(0deg,var(--pixel-grid) 1px,transparent 1px);background-size:14px 14px}#topbar{height:58px;display:flex;align-items:center;gap:10px;padding:0 12px;background:var(--surface2);border-radius:6px;border:3px solid var(--line-strong);box-shadow:0 0 0 2px var(--line),6px 6px 0 var(--shadow);-webkit-user-select:none;user-select:none}#title{font-size:.78rem;opacity:.82;letter-spacing:.14em}.spacer{flex:1}#main{display:grid;grid-template-columns:minmax(340px,var(--splitLeft)) var(--splitW) minmax(420px,1fr);min-height:0;gap:0}.pane{min-height:0;border-radius:6px;background:var(--surface);position:relative;overflow:hidden;padding:6px;box-sizing:border-box;border:3px solid var(--line-strong);box-shadow:0 0 0 2px var(--line),6px 6px 0 var(--shadow)}.splitter{cursor:col-resize;-webkit-user-select:none;user-select:none;touch-action:none;position:relative;background:repeating-linear-gradient(0deg,var(--pixel-grid-strong),var(--pixel-grid-strong) 4px,transparent 4px,transparent 8px)}.splitter:before{content:"";position:absolute;top:10px;bottom:10px;left:50%;width:12px;transform:translate(-50%);background:repeating-linear-gradient(0deg,var(--accent-strong),var(--accent-strong) 2px,transparent 2px,transparent 4px);opacity:.2}body.split-dragging .splitter:before{opacity:.45}.icon-btn{height:36px;min-width:36px;padding:0 12px;border-radius:4px;border:2px solid var(--line-strong);background:var(--surface);color:var(--text);display:inline-flex;align-items:center;justify-content:center;gap:8px;cursor:pointer;box-shadow:0 0 0 2px var(--line),4px 4px 0 var(--shadow)}.icon-btn:hover{background:var(--surface2);box-shadow:0 0 0 2px var(--accent-strong),4px 4px 0 var(--shadow)}.icon-btn[disabled]{opacity:.35;cursor:default;box-shadow:none}.ico{font-size:.95rem;line-height:1;opacity:.92}.step-controls{display:inline-flex;align-items:center;gap:8px}.step-counter{font-size:.7rem;color:var(--text);padding:0 12px;height:34px;display:inline-flex;align-items:center;border-radius:4px;background:var(--surface2);border:2px solid var(--line-strong);box-shadow:0 0 0 2px var(--line),4px 4px 0 var(--shadow),0 0 0 2px var(--accent-strong) inset;letter-spacing:.04em}.qubit-controls{display:inline-flex;align-items:center;gap:6px}#blochCanvas{height:100%;padding:22px 12px 12px;box-sizing:border-box;overflow:auto;position:relative;background-image:linear-gradient(90deg,var(--pixel-grid) 1px,transparent 1px),linear-gradient(0deg,var(--pixel-grid) 1px,transparent 1px);background-size:12px 12px}#bloch-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(var(--blochTileMin, 320px),1fr));gap:var(--gap);align-items:start;position:relative}body.bloch-single-col #bloch-grid{grid-template-columns:repeat(auto-fit,minmax(100%,1fr))}.bloch-tile{background:var(--surface2);border-radius:6px;padding:12px;min-height:calc(var(--blochTileMin, 320px) + 120px);display:flex;flex-direction:column;gap:10px;border:3px solid var(--line-strong);box-shadow:0 0 0 2px var(--line),6px 6px 0 var(--shadow);transition:transform .12s ease,box-shadow .12s ease}.bloch-tile-header{font-size:.72rem;color:var(--text);opacity:.92;display:inline-flex;align-items:center;gap:6px}.bloch-tile.selected{box-shadow:0 0 0 2px var(--accent-strong),0 0 0 4px var(--line),6px 6px 0 var(--shadow);transform:translateY(-2px)}.bloch-tile.entangled{box-shadow:0 0 0 2px var(--glow),0 0 0 4px var(--line),6px 6px 0 var(--shadow)}.bloch-tile.measured-hit{box-shadow:0 0 0 2px var(--accent-strong),0 0 0 6px var(--line)}.bloch-tile.measured-hit.measure-pulse{animation:measurePulse .9s steps(4) 2}.bloch-tile.measured-miss{transform:translateY(2px);opacity:.92}@keyframes measurePulse{0%{box-shadow:0 0 0 0 var(--accent-strong)}50%{box-shadow:0 0 0 8px transparent}to{box-shadow:0 0 0 0 transparent}}.bloch-tile:hover{transform:translateY(-2px);box-shadow:0 0 0 2px var(--accent-strong),0 0 0 4px var(--line),6px 6px 0 var(--shadow)}.selection-pill{display:none;padding:2px 6px;border-radius:3px;font-size:.62rem;color:var(--surface);background:var(--pop-cyan);box-shadow:inset 0 0 0 2px var(--line)}.bloch-tile.selected .selection-pill{display:inline-flex}.bloch-tile.entangled .selection-pill{display:inline-flex;background:var(--pop-pink);color:#0b0b0b}.entangled-tag{display:none;padding:2px 8px;border-radius:3px;font-size:.62rem;background:var(--pop-lime);color:#0b0b0b;box-shadow:inset 0 0 0 2px var(--line);text-transform:uppercase;letter-spacing:.05em}.entangled-tag.on{display:inline-flex;align-items:center;gap:4px}.bloch-tile.mixed .tile-canvas{box-shadow:inset 0 0 0 2px var(--line-strong)}.bloch-tile.measured .tile-canvas{box-shadow:inset 0 0 0 2px var(--accent-strong),0 0 0 2px var(--line)}.tile-canvas{border-radius:4px;background:repeating-linear-gradient(90deg,var(--pixel-grid-strong),var(--pixel-grid-strong) 1px,transparent 1px,transparent 6px),repeating-linear-gradient(0deg,var(--pixel-grid-strong),var(--pixel-grid-strong) 1px,transparent 1px,transparent 6px),var(--surface);overflow:hidden;aspect-ratio:1 / 1;flex:0 0 auto;border:2px solid var(--line-strong)}.tile-canvas canvas{image-rendering:pixelated}.purity-chip{margin-top:6px;font-size:.62rem;letter-spacing:.02em;color:var(--muted);padding:6px 8px;border-radius:3px;background:var(--surface);position:relative;overflow:hidden;border:2px solid var(--line-strong)}.purity-chip:after{content:"";position:absolute;left:0;top:0;bottom:0;width:calc(var(--purity, 1) * 100%);background:repeating-linear-gradient(90deg,var(--accent-strong),var(--accent-strong) 2px,transparent 2px,transparent 6px);opacity:.18;pointer-events:none}.purity-chip.mixed{color:var(--accent-strong);background:var(--surface2)}.measurement-badge{margin-top:6px;font-size:.62rem;color:var(--text);padding:4px 8px;border-radius:3px;background:var(--surface);border:2px dashed var(--pop-lime);display:none}.measurement-badge.on{display:inline-flex}.measurement-badge.pending{opacity:.8;background:var(--surface2)}#entanglementBadge{position:absolute;left:12px;top:6px;padding:6px 10px;border-radius:4px;background:var(--pop-pink);color:#0b0b0b;font-size:.62rem;letter-spacing:.04em;opacity:0;transform:translateY(-6px);transition:opacity .16s ease,transform .16s ease;pointer-events:none;border:2px solid var(--line-strong);box-shadow:0 0 0 2px var(--line);z-index:5}body.entangled #entanglementBadge{opacity:1;transform:translateY(0)}#correlationsPanel{position:absolute;right:12px;bottom:12px;min-width:220px;padding:10px;border-radius:4px;background:var(--surface);box-shadow:0 0 0 2px var(--line),6px 6px 0 var(--shadow);color:var(--text);font-size:.7rem;opacity:0;pointer-events:none;transition:opacity .18s ease,transform .18s ease;transform:translateY(6px);border:2px solid var(--line-strong)}body.entangled #correlationsPanel{opacity:1;pointer-events:auto;transform:translateY(0)}body.corr-active #correlationsPanel{box-shadow:0 0 0 2px var(--accent-strong),6px 6px 0 var(--shadow)}.micro-panel .micro-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}.micro-title{font-size:.62rem;letter-spacing:.05em;color:var(--muted)}.micro-icon{border:2px solid var(--line-strong);background:var(--surface2);color:var(--text);border-radius:4px;width:26px;height:26px;cursor:pointer;box-shadow:0 0 0 2px var(--line)}.corr-row{display:grid;grid-template-columns:60px 1fr 36px;align-items:center;gap:8px;margin:4px 0}.corr-bar{position:relative;height:8px;background:var(--surface);border-radius:2px;overflow:hidden;border:2px solid var(--line-strong)}.corr-fill{position:absolute;left:50%;top:0;bottom:0;width:0;background:linear-gradient(90deg,var(--pop-pink),var(--pop-cyan));transform-origin:left}.corr-val{text-align:right;color:var(--muted);font-size:.66rem}.corr-actions{display:flex;gap:6px;margin-top:6px}.inspect-popover{position:absolute;right:12px;top:12px;width:240px;background:var(--surface);border-radius:4px;padding:10px;box-shadow:0 0 0 2px var(--line),6px 6px 0 var(--shadow);display:none;border:2px solid var(--line-strong)}.inspect-popover.on{display:block}.inspect-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}.inspect-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:4px}.inspect-cell{height:30px;border-radius:3px;display:flex;align-items:center;justify-content:center;font-size:.62rem;color:var(--surface);background:var(--text);border:2px solid var(--line-strong)}.toast{position:fixed;bottom:18px;right:18px;min-width:140px;padding:10px 14px;border-radius:4px;background:var(--surface2);color:var(--text);box-shadow:0 0 0 2px var(--line),6px 6px 0 var(--shadow);opacity:0;transform:translateY(10px);transition:opacity .16s ease,transform .16s ease;pointer-events:none;z-index:6000}.toast.on{opacity:1;transform:translateY(0)}.state-chip{margin-top:8px;padding:6px 10px;border-radius:4px;background:var(--surface);color:var(--text);font-size:.72rem;border:2px solid var(--line-strong)}.state-chip.entangled{background:var(--surface2);color:var(--text);border-style:dashed}.state-chip.pending{background:var(--surface);color:var(--muted);border-style:dotted}#circuitCanvas{height:100%;padding:12px;box-sizing:border-box}#circuit-grid{position:relative;height:100%;border-radius:6px;background:repeating-linear-gradient(90deg,var(--pixel-grid),var(--pixel-grid) 1px,transparent 1px,transparent 6px),repeating-linear-gradient(0deg,var(--pixel-grid),var(--pixel-grid) 1px,transparent 1px,transparent 6px),var(--surface);box-shadow:inset 0 0 0 2px var(--line),0 0 0 2px var(--line),6px 6px 0 var(--shadow);overflow:auto;resize:both;min-width:420px;min-height:360px;max-width:100%;max-height:100%}#initStateMenu{position:absolute;min-width:140px;padding:10px;border-radius:4px;background:var(--surface);box-shadow:0 0 0 2px var(--line),6px 6px 0 var(--shadow);color:var(--text);z-index:5000;display:none;border:2px solid var(--line-strong)}#initStateMenu.on{display:block}#initStateMenu .init-title{font-size:.62rem;letter-spacing:.04em;color:var(--muted);margin-bottom:8px}#initStateMenu .init-options{display:flex;gap:8px}#initStateMenu button{flex:1;border:0;border-radius:4px;padding:8px;background:var(--surface2);color:var(--text);cursor:pointer;font-weight:700;border:2px solid var(--line-strong);box-shadow:0 0 0 2px var(--line)}#initStateMenu button:hover{background:var(--surface);box-shadow:0 0 0 2px var(--accent-strong),0 0 0 2px var(--line)}#circuit-canvas{position:relative}.cstep-label{position:absolute;top:6px;height:24px;display:flex;align-items:center;justify-content:center;font-size:.78rem;color:var(--muted);pointer-events:none}.cwire-label{position:absolute;left:8px;width:80px;font-size:.74rem;color:var(--text);opacity:.9;cursor:pointer;transition:color .12s ease}.cwire-ket{position:absolute;left:8px;width:80px;font-size:.78rem;font-family:"Press Start 2P",Courier New,monospace;letter-spacing:.02em;color:var(--text);cursor:pointer;transition:color .12s ease}.cwire-label:hover,.cwire-ket:hover{color:var(--accent-strong)}.cstep-highlight{position:absolute;top:0;bottom:0;background:transparent;pointer-events:none;transition:background .12s ease,box-shadow .12s ease,opacity .12s ease}.cstep-highlight.on{background:repeating-linear-gradient(90deg,var(--pixel-grid-strong),var(--pixel-grid-strong) 2px,transparent 2px,transparent 10px),var(--pixel-grid);box-shadow:inset 0 0 0 2px var(--accent-strong),inset 0 0 0 4px var(--line),0 0 0 2px var(--line);opacity:.9}.cdrop-highlight{position:absolute;width:46px;height:46px;border-radius:4px;background:var(--surface2);box-shadow:inset 0 0 0 2px var(--circuit-gate-border),0 0 0 2px var(--circuit-gate-glow);opacity:0;pointer-events:none;transform:translate(-9999px,-9999px)}.cdrop-highlight.on{opacity:1}.circuit-svg{position:absolute;left:0;top:0;pointer-events:none}.cgate{position:absolute;width:42px;height:42px;border-radius:4px;display:flex;align-items:center;justify-content:center;font-weight:700;letter-spacing:.02em;-webkit-user-select:none;user-select:none;cursor:grab;background:var(--circuit-gate-bg);color:var(--text);border:2px solid var(--circuit-gate-border);box-shadow:0 0 0 2px var(--line),4px 4px 0 var(--shadow);transition:transform .08s ease,box-shadow .12s ease,background .12s ease,color .12s ease;transform:translate(-50%,-50%)}.cgate:hover{box-shadow:0 0 0 2px var(--accent-strong),4px 4px 0 var(--shadow);background:var(--surface2)}.cgate:active{cursor:grabbing;transform:translate(-50%,-50%) translateY(1px)}.cgate[data-gate=H]{font-size:1rem}.cx-node{background:transparent;border:0;box-shadow:none}.cgate-measure{border:2px solid var(--circuit-gate-border);background:var(--surface2);box-shadow:0 0 0 2px var(--line),4px 4px 0 var(--shadow)}.ccontrol{width:12px;height:12px;border-radius:2px;background:var(--circuit-gate-border)}.ctarget{width:20px;height:20px;border-radius:2px;box-shadow:inset 0 0 0 2px var(--circuit-gate-border);position:relative}.ctarget:after{content:"";position:absolute;left:50%;top:50%;width:2px;height:20px;background:var(--circuit-gate-border);transform:translate(-50%,-50%)}.ctarget:before{content:"";position:absolute;left:50%;top:50%;width:20px;height:2px;background:var(--circuit-gate-border);transform:translate(-50%,-50%)}.measure-icon{width:26px;height:22px;position:relative;border:none;border-radius:0;background:transparent;box-shadow:none}.measure-icon:before{content:"";position:absolute;left:4px;right:4px;top:10px;height:8px;border:2px solid var(--circuit-gate-border);border-bottom:none;border-radius:10px 10px 0 0;background:transparent}.measure-icon:after{content:"";position:absolute;left:50%;top:4px;width:2px;height:18px;background:var(--circuit-gate-border);transform:translate(-50%) rotate(28deg);transform-origin:bottom;opacity:.9;box-shadow:0 10px 0 0 var(--surface2)}.gate-x,.gate-y,.gate-z,.gate-h,.gate-s,.gate-t{background:var(--accent-strong);color:var(--surface);border-color:var(--accent-strong);box-shadow:0 0 0 2px var(--line),4px 4px 0 var(--shadow)}.gate-m{background:var(--circuit-gate-bg);border-color:var(--circuit-gate-border);color:var(--text)}.floating-panel{position:fixed;left:18px;bottom:18px;width:var(--gateLibW);max-width:calc(100vw - 36px);border-radius:6px;background:var(--surface);box-shadow:0 0 0 2px var(--line),6px 6px 0 var(--shadow);padding:10px;z-index:4000;display:block;border:2px solid var(--line-strong)}.floating-header{display:flex;align-items:baseline;justify-content:space-between;gap:12px;padding:4px 4px 6px}.floating-title{font-size:.62rem;color:var(--muted);letter-spacing:.08em}.floating-hint{font-size:.62rem;color:var(--muted);opacity:.85;white-space:nowrap}.gate-hover-math{margin:4px 4px 10px;padding:8px 10px;border-radius:12px;background:var(--surface2);color:var(--text);min-height:56px;overflow-x:auto;border:2px solid var(--line-strong)}.gate-desc{font-size:.62rem;color:var(--pop-cyan);margin-bottom:6px;letter-spacing:.02em}.gate-library-grid{display:flex;gap:8px;flex-wrap:wrap;padding:6px 4px 4px}.palette-gate{border-radius:6px;background:var(--surface2);padding:6px;cursor:grab;border:2px solid var(--line-strong)}.palette-gate:active{cursor:grabbing}.gate-box{width:46px;height:34px;border-radius:4px;display:flex;align-items:center;justify-content:center;font-weight:700;border:2px solid var(--circuit-gate-border);background:var(--circuit-gate-bg);color:var(--text);box-shadow:0 0 0 2px var(--line),4px 4px 0 var(--shadow)}.palette-gate:hover .gate-box{box-shadow:0 0 0 2px var(--accent-strong),4px 4px 0 var(--shadow);background:var(--surface2)}.gate-box.gate-measure .measure-icon{transform:translateY(1px)}.cx-drag-label{position:absolute;top:-8px;left:50%;transform:translate(-50%,-100%);font-size:.5rem;letter-spacing:.04em;color:var(--muted);background:var(--surface);border:1px solid var(--line);padding:0 3px;border-radius:3px;opacity:.9;pointer-events:none}.toolstrip{position:absolute;top:10px;right:10px;display:inline-flex;gap:8px;padding:8px;border-radius:4px;background:var(--surface);border:2px solid var(--line-strong);box-shadow:0 0 0 2px var(--line),4px 4px 0 var(--shadow);opacity:0;pointer-events:none;transition:opacity .15s ease}#circuitPane:hover .toolstrip{opacity:.85;pointer-events:auto}body.has-selection #circuitToolstrip{opacity:1;pointer-events:auto}#dragRoleBadge{position:fixed;left:-9999px;top:-9999px;z-index:9999;padding:4px 6px;border-radius:4px;font-size:.62rem;letter-spacing:.03em;color:var(--text);background:var(--surface);border:2px solid var(--line-strong);box-shadow:0 0 0 2px var(--line),3px 3px 0 var(--shadow);pointer-events:none;opacity:0;transition:opacity .12s ease}#dragRoleBadge.on{opacity:.95}.micro-overlay{position:fixed;left:12px;bottom:12px;display:inline-flex;gap:8px;padding:8px;border-radius:4px;background:var(--surface);border:2px solid var(--line-strong);box-shadow:0 0 0 2px var(--line),4px 4px 0 var(--shadow);opacity:.15;transition:opacity .18s ease}#blochPane:hover .micro-overlay{opacity:.9}body.is-playing #blochOverlay{opacity:.25}.settings-panel{flex-direction:column;gap:6px;z-index:9100}.settings-header{display:flex;align-items:center;justify-content:space-between;gap:8px;cursor:move;-webkit-user-select:none;user-select:none}.settings-title{font-size:.62rem;letter-spacing:.05em;color:var(--muted)}.settings-actions{display:inline-flex;gap:4px}.corner-btn{width:24px;height:24px;border-radius:4px;border:2px solid var(--line-strong);background:var(--surface2);color:var(--text);cursor:pointer;box-shadow:0 0 0 2px var(--line)}.corner-btn:hover{background:var(--surface)}.settings-body{display:inline-flex;gap:8px;flex-wrap:wrap;align-items:center}.settings-panel.collapsed .settings-body{display:none}.settings-panel.corner-tl{top:12px;left:12px;right:auto;bottom:auto}.settings-panel.corner-tr{top:12px;right:12px;left:auto;bottom:auto}.settings-panel.corner-bl{bottom:12px;left:12px;right:auto;top:auto}.settings-panel.corner-br{bottom:12px;right:12px;left:auto;top:auto}.micro-btn{height:28px;padding:0 10px;border-radius:4px;border:2px solid var(--line-strong);cursor:pointer;background:var(--surface2);color:var(--text);font-size:.7rem;box-shadow:0 0 0 2px var(--line)}.micro-btn:hover{background:var(--surface);box-shadow:0 0 0 2px var(--accent-strong),0 0 0 2px var(--line)}.micro-toggle{display:inline-flex;align-items:center;cursor:pointer}.micro-toggle input{display:none}.micro-pill{height:28px;padding:0 10px;border-radius:4px;display:inline-flex;align-items:center;background:var(--surface2);color:var(--text);font-size:.7rem;border:2px solid var(--line-strong);box-shadow:0 0 0 2px var(--line)}.micro-toggle input:checked+.micro-pill{background:var(--surface);box-shadow:inset 0 0 0 2px var(--accent-strong)}.micro-toggle:hover .micro-pill{box-shadow:0 0 0 2px var(--accent-strong),0 0 0 2px var(--line)}.micro-slider{display:inline-flex;align-items:center;gap:6px}.micro-slider input[type=range]{width:110px;accent-color:var(--accent-strong)}.micro-slider .size-val{min-width:64px;justify-content:center}.coin-overlay{position:fixed;right:18px;bottom:188px;width:240px;pointer-events:none;opacity:0;transform:translateY(8px);transition:opacity .16s ease,transform .16s ease;z-index:4200}body.coin-anim-visible .coin-overlay{opacity:1;transform:translateY(0)}.coin-panel{padding:10px;border-radius:4px;background:var(--surface);box-shadow:0 0 0 2px var(--line),6px 6px 0 var(--shadow);border:2px solid var(--line-strong)}.coin-panel-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;font-size:.7rem;color:var(--muted)}.coin-panel-title{letter-spacing:.05em;text-transform:uppercase}.coin-outcome{color:var(--text);font-weight:700;font-size:.82rem}.coin-outcome.coin-hit{color:var(--accent-strong)}.coin-outcome.coin-pulse{animation:coinPulse 1.2s ease-in-out 2}.coin-odds{margin:2px 0 8px;font-size:.7rem;color:var(--muted)}.coin-odds.coin-miss{opacity:.8}.coin-mount{width:100%;aspect-ratio:1;border-radius:4px;background:var(--surface2);overflow:hidden;border:2px solid var(--line-strong)}.drawer{position:fixed;left:12px;right:12px;bottom:12px;height:var(--drawerH);min-height:var(--drawerMinH);max-height:var(--drawerMaxH);border-radius:6px;background:var(--surface);box-shadow:0 0 0 2px var(--line),6px 6px 0 var(--shadow);border:2px solid var(--line-strong);transform:translateY(calc(100% + 18px));transition:transform .18s ease;z-index:5000;display:grid;grid-template-rows:44px 1fr 14px;overflow:hidden}body.backend-open #backendDrawer{transform:translateY(0)}.drawer-header{display:flex;align-items:center;justify-content:space-between;padding:0 12px;background:var(--surface2);border-bottom:2px solid var(--line-strong)}.drawer-left{font-size:.7rem;color:var(--muted);letter-spacing:.05em}.drawer-right{display:inline-flex;align-items:center;gap:12px}.drawer-toggle{display:inline-flex;align-items:center;gap:6px;font-size:.7rem;color:var(--muted);cursor:pointer;-webkit-user-select:none;user-select:none}.drawer-toggle input{accent-color:var(--accent-strong)}.mathjax-panel{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:12px;min-height:0;overflow:auto;cursor:ns-resize}.math-col{display:flex;flex-direction:column;gap:12px;min-height:0}.math-block{background:var(--surface2);border-radius:4px;padding:10px;border:2px solid var(--line-strong)}.math-label{font-size:.62rem;color:var(--muted);letter-spacing:.08em;text-transform:uppercase;margin-bottom:8px}.math-content{font-size:.76rem;color:var(--text);overflow-x:auto}#matrixBlock{display:none}body.show-matrix #matrixBlock{display:block}.drawer-handle{background:var(--surface2);cursor:ns-resize;touch-action:none;border-top:2px solid var(--line-strong)}.popover{position:absolute;left:12px;bottom:58px;width:280px;border-radius:6px;background:var(--surface);box-shadow:0 0 0 2px var(--line),6px 6px 0 var(--shadow);padding:10px;display:none;z-index:3000;border:2px solid var(--line-strong)}body.prob-open #probPopover{display:block}.mini-histogram{display:grid;grid-template-columns:1fr;gap:10px;padding:4px 2px 8px}.bar{display:grid;grid-template-columns:42px 1fr;align-items:center;gap:10px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,monospace;font-size:.78rem;color:var(--muted)}.bar-track{height:8px;border-radius:2px;background:var(--surface2);overflow:hidden;border:2px solid var(--line-strong)}.bar-fill{height:100%;width:0%;background:repeating-linear-gradient(90deg,var(--accent-strong),var(--accent-strong) 4px,transparent 4px,transparent 8px);border-radius:2px}.prob-row{grid-template-columns:52px 1fr;row-gap:8px;padding:4px 2px}.prob-state{align-self:center}.prob-math{grid-column:1 / span 2;color:var(--text);font-size:.72rem}.popover-note{margin-top:6px;font-size:.62rem;color:var(--muted);line-height:1.25}.menu{position:relative}.menu-popover{position:absolute;right:0;top:40px;width:220px;border-radius:6px;background:var(--surface);box-shadow:0 0 0 2px var(--line),6px 6px 0 var(--shadow);padding:8px;display:none;z-index:6000;border:2px solid var(--line-strong)}body.menu-open #moreMenuPopover{display:block}.menu-item{width:100%;text-align:left;padding:9px 10px;border-radius:4px;border:2px solid transparent;background:var(--surface2);color:var(--text);cursor:pointer;font-size:.72rem}.menu-item:hover{background:var(--surface);border-color:var(--accent-strong)}.menu-item.danger{color:var(--accent-strong)}.menu-sep{height:1px;background:var(--line);margin:6px 0}.menu-label{font-size:.62rem;color:var(--muted);padding:6px 10px 2px;letter-spacing:.08em;text-transform:uppercase}.backdrop{position:fixed;top:0;right:0;bottom:0;left:0;background:#00000038;opacity:0;pointer-events:none;transition:opacity .16s ease;z-index:2500}body.backend-open #overlayBackdrop,body.prob-open #overlayBackdrop,body.menu-open #overlayBackdrop{opacity:1;pointer-events:auto}#hoverTooltip{position:fixed;transform:translate(-50%,-100%);background:var(--surface);color:var(--text);padding:8px 10px;border-radius:4px;font-size:.7rem;box-shadow:0 0 0 2px var(--line),4px 4px 0 var(--shadow);opacity:0;pointer-events:none;transition:opacity .12s ease,transform .12s ease;z-index:9000}#hoverTooltip.on{opacity:1;transform:translate(-50%,-120%)}@media (max-width: 980px){#main{grid-template-columns:1fr;grid-template-rows:minmax(320px,42vh) 1fr;gap:var(--gap)}.splitter{display:none}.floating-panel{left:12px;right:12px;width:auto}}.gateLibTopControls{display:flex;gap:8px;align-items:center;justify-content:flex-start;padding-bottom:8px}#gateLibrary{--gateLibCollapsedH: 56px;cursor:grab}#gateLibrary:active{cursor:grabbing}body.gate-lib-collapsed #gateLibrary .gate-hover-math,body.gate-lib-collapsed #gateLibrary .gate-library-grid,body.gate-lib-collapsed #gateLibrary .gateCategories,body.gate-lib-collapsed #gateLibrary #gatePaletteRow{display:none!important}body.gate-lib-collapsed #gateLibrary{padding-bottom:10px}body.gate-lib-collapsed #gateLibrary .floating-header{padding-bottom:0}body.gate-lib-collapsed #gateLibToggle .ico{display:inline-block;transform:rotate(-90deg);transition:transform .12s ease}#gateLibToggle .ico{display:inline-block;transition:transform .12s ease}@keyframes coinPulse{0%{text-shadow:0 0 0 rgba(110,255,180,0);transform:scale(1)}50%{text-shadow:0 0 18px rgba(110,255,180,.8);transform:scale(1.06)}to{text-shadow:0 0 0 rgba(110,255,180,0);transform:scale(1)}}
